apiVersion: v1
kind: ConfigMap
metadata:
  name: ue-job-configs
  labels:
    app: ue-pipeline
data:
  # 将 examples 文件夹中的配置文件内容放在这里
  # 需要根据实际配置文件内容填充
  
  job_sequence_analysis.json: |
    {
      "job_id": "sequence_analysis_001",
      "job_type": "create_sequence",
      "map": "/Game/YourMap/YourScene",
      "sequence_config": {
        "output_dir": "/Game/CameraController/Generated",
        "sequence_count": 10,
        "fps": 30,
        "duration_seconds": 60,
        "nav_roam": {
          "num_legs": 6,
          "random_point_radius_cm": 500000
        }
      }
    }
  
  job_bake.json: |
    {
      "job_id": "bake_navmesh_001",
      "job_type": "bake_navmesh",
      "maps": [
        {
          "name": "YourScene",
          "path": "/Game/YourMap/YourScene"
        }
      ]
    }
  
  job_render.json: |
    {
      "job_id": "render_001",
      "job_type": "render",
      "sequences": [
        {
          "path": "/Game/CameraController/Generated/YourSequence"
        }
      ],
      "render_config": {
        "output_dir": "/app/output/renders",
        "resolution": "1920x1080",
        "fps": 30
      }
    }
  
  job_export.json: |
    {
      "job_id": "export_001",
      "job_type": "export",
      "sequence_path": "/Game/CameraController/Generated/YourSequence",
      "output_dir": "/app/output/exports"
    }

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ue-config
  labels:
    app: ue-pipeline
data:
  linux_ue_config.json: |
    {
      "editor_path": "/usr/local/UnrealEngine/Engine/Binaries/Linux/UnrealEditor-Cmd",
      "project_path": "/app/ue_template/WorldData/WorldData.uproject",
      "output_base_dir": "/app/output",
      "scenes": {
        "YourSceneCategory": {
          "maps": [
            {
              "name": "YourScene",
              "path": "/Game/YourMap/YourScene",
              "navmesh_baked": true
            }
          ]
        }
      }
    }

---
apiVersion: v1
kind: Secret
metadata:
  name: bos-credentials
  labels:
    app: ue-pipeline
type: Opaque
stringData:
  access-key: "your-bos-access-key"
  secret-key: "your-bos-secret-key"

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: ue-project-pvc
  labels:
    app: ue-pipeline
spec:
  accessModes:
    - ReadWriteMany  # 多个 Pod 可同时读取
  storageClassName: nfs-storage  # 根据你的存储类调整
  resources:
    requests:
      storage: 100Gi

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: ue-output-pvc
  labels:
    app: ue-pipeline
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: nfs-storage
  resources:
    requests:
      storage: 500Gi
